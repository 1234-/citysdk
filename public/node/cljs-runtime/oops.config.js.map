{"version":3,"file":"oops.config.js","sources":["oops/config.cljs"],"mappings":"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","names":["var_args","args__4534__auto__","len__4531__auto__","i__4532__auto__","argseq__4535__auto__","cljs.core/IndexedSeq","oops.config/update-current-runtime-config!","seq21807","G__21808","cljs.core/first","cljs.core/next","self__4518__auto__","f-or-map","args","oops.config/get-config-key","p__21825","vec__21826","cljs.core.nth.cljs$core$IFn$_invoke$arity$3","seq21819","G__21820","key","config","oops.config/get-suppress-reporting","p__21906","vec__21907","seq21905","self__4519__auto__","cljs.core/seq","new-factory-fn","oops.config/get-initial-runtime-config","new-config","oops.config/throw-errors-from-macro-call-sites?","p__21939","vec__21941","seq21936","cljs.core/map?","cljs.core.get.cljs$core$IFn$_invoke$arity$3","or__3949__auto__","cljs.core.not_EQ_.cljs$core$IFn$_invoke$arity$2","oops.config/get-current-runtime-config","oops.config.get_config_key.cljs$core$IFn$_invoke$arity$variadic","oops.config/get-error-reporting","p__21865","vec__21866","seq21860","oops.config.update_current_runtime_config_BANG_.cljs$core$IFn$_invoke$arity$variadic","cljs.core/merge","oops.config/get-warning-reporting","p__21885","vec__21886","seq21881","G__21829","oops.config/use-envelope?","p__21951","vec__21952","seq21950","js/Error","oops.config/set-current-runtime-config!","cljs.core.apply.cljs$core$IFn$_invoke$arity$3","oops.config/*runtime-config*","oops.config/set-child-factory!","oops.config/has-config-key?","p__21843","vec__21844","seq21839","G__21840","oops.config/get-child-factory","p__21929","vec__21930","seq21925"],"sourcesContent":["(ns oops.config\n  \"Code supporting dynamic (run-time) configuration. See runtime-prefixed keys in config map in defaults.clj.\"\n  (:require-macros [oops.config :refer [gen-runtime-config]]))\n\n(defn get-initial-runtime-config []\n  (gen-runtime-config))\n\n; use oops.config/get-current-runtime-config to get currently effective config\n(def ^:dynamic *runtime-config* (get-initial-runtime-config))\n\n; -- public api -------------------------------------------------------------------------------------------------------------\n\n(defn set-current-runtime-config! [new-config]\n  {:pre [(map? new-config)]}\n  (set! *runtime-config* new-config)\n  new-config)\n\n(defn get-current-runtime-config []\n  *runtime-config*)\n\n(defn update-current-runtime-config! [f-or-map & args]\n  (if (map? f-or-map)\n    (update-current-runtime-config! merge f-or-map)\n    (set-current-runtime-config! (apply f-or-map (get-current-runtime-config) args))))\n\n; -- icing ------------------------------------------------------------------------------------------------------------------\n\n(defn get-config-key [key & [config]]\n  (key (or config (get-current-runtime-config))))\n\n(defn ^boolean has-config-key? [key & [config]]\n  (not= ::not-found (get (or config (get-current-runtime-config)) key ::not-found)))\n\n(defn get-error-reporting [& [config]]\n  (get-config-key :error-reporting config))\n\n(defn get-warning-reporting [& [config]]\n  (get-config-key :warning-reporting config))\n\n(defn get-suppress-reporting [& [config]]\n  (get-config-key :suppress-reporting config))\n\n(defn get-child-factory [& [config]]\n  (get-config-key :child-factory config))\n\n(defn set-child-factory! [new-factory-fn]\n  (update-current-runtime-config! {:child-factory new-factory-fn}))\n\n(defn ^boolean throw-errors-from-macro-call-sites? [& [config]]\n  (true? (get-config-key :throw-errors-from-macro-call-sites config)))\n\n(defn ^boolean use-envelope? [& [config]]\n  (true? (get-config-key :use-envelope config)))\n"]}