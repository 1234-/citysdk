{"version":3,"sources":["cljs_promises/core.cljs"],"sourcesContent":["(ns cljs-promises.core)\n\n(defn- cast-as-array\n  [coll]\n  (if (or (array? coll)\n          (not (reduceable? coll)))\n    coll\n    (into-array coll)))\n\n;; the ES6 API:\n\n(defn promise\n  [resolver]\n  (js/Promise. resolver))\n\n(defn resolve\n  [x]\n  (.resolve js/Promise x))\n\n(defn reject\n  [x]\n  (.reject js/Promise x))\n\n(defn all\n  [coll]\n  (.all js/Promise (cast-as-array coll)))\n\n(defn race\n  [coll]\n  (.race js/Promise (cast-as-array coll)))\n\n(defn then\n  ([promise on-fulfilled]\n   (.then promise on-fulfilled))\n  ([promise on-fulfilled on-rejected]\n   (.then promise on-fulfilled on-rejected)))\n\n(defn catch\n  [promise on-rejected]\n  (.catch promise on-rejected))\n\n;; extras!\n\n(defn timeout\n  [ms]\n  (promise (fn [resolve _]\n             (js/setTimeout resolve ms))))\n"],"mappings":";;AAEA,AAAA,AAAOA,AACJ;AADH,AAEE,AAAI,AAAI,AAACC,AAAOC,AACR,AAAK,AAACC,AAAYD;AACxBA;;AACA,AAACE,AAAWF;;;AAIhB,AAAA,AAAMG,AACH;AADH,AAEE,AAAAC,AAAaC;;AAEf,AAAA,AAAMC,AACH;AADH,AAEE,AAAUF,AAAWG;;AAEvB,AAAA,AAAMC,AACH;AADH,AAEE,AAASJ,AAAWG;;AAEtB,AAAA,AAAME,AACH;AADH,AAEE,AAAML,AAAW,AAACN,AAAcE;;AAElC,AAAA,AAAMU,AACH;AADH,AAEE,AAAON,AAAW,AAACN,AAAcE;;AAEnC,AAAA,AAAA,AAAA,AAAMY;AAAN,AAAA,AAAA,AAAA,AAAA;AAAA,AAAA,AAAAD;AAAA;AAAA,AAAAC,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA;;;AAAA;AAAA,AAAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA;;;;AAAA,AAAA,AAAAC,AAAA,AAAA,AAAA,AAAA;;;;;AAAA,AAAA,AAAA,AAAMD,AACF,AAAQ;AADZ,AAEG,AAAOE,AAAQC;;;AAFlB,AAAA,AAAA,AAAMH,AAGF,AAAQ,AAAa;AAHzB,AAIG,AAAOE,AAAQC,AAAaC;;;AAJ/B,AAAA,AAAA,AAAMJ;;AAAN,AAMA,AAAA,AAAMK,AACH,AAAQ;AADX,AAEE,AAAQH,AAAQE;;AAIlB,AAAA,AAAME,AACH;AADH,AAEE,AAACf,AAAQ,AAAK,AAAQ;AAAb,AACE,AAACgB,AAAcC,AAAQC","names":["cljs-promises.core/cast-as-array","cljs.core/array?","coll","cljs.core/reduceable?","cljs.core.into_array.cljs$core$IFn$_invoke$arity$1","cljs-promises.core/promise","js/Promise","resolver","cljs-promises.core/resolve","x","cljs-promises.core/reject","cljs-promises.core/all","cljs-promises.core/race","G__8991","cljs-promises.core/then","js/Error","promise","on-fulfilled","on-rejected","cljs-promises.core/catch","cljs-promises.core/timeout","js/setTimeout","resolve","ms"]}