{"version":3,"sources":["ajax/ring.cljc"],"sourcesContent":["(ns ajax.ring\n  (:require [ajax.interceptors :refer [map->ResponseFormat]]\n            [ajax.protocols :refer [-status -get-all-headers -body]]\n            [ajax.formats :as f]))\n\n(defn make-ring-read [body-read]\n  (fn ring-read [response]\n    {:status (-status response)\n     :headers (-get-all-headers response)\n     :body (body-read response)}))\n\n(defn ring-response-format\n  \"Returns a Ring-compatible response map.\n\n   Optionally can be passed a :format option. This should be another\n   response-format map. If format is provided it will be used to\n   specify the content-type, and the read method will be used to\n   populate the :body key in the response map.\"\n  ([] (ring-response-format {:format (f/raw-response-format)}))\n  ([{{:keys [read description content-type]} :format}]\n   (map->ResponseFormat {:read (make-ring-read read)\n                         :description (str \"ring/\" description)\n                         :content-type content-type})))\n"],"mappings":";;;;;AAKA,AAAA,AAAMA,AAAgB;AAAtB,AACE,AAAe;AAAf,AAAA,AAAA,AAAA,AAAA,AACW,AAACC,AAAQC,AACR,AAACC,AAAiBD,AACrB,AAACE,AAAAA,AAAAA,AAAUF,AAAAA;;;AAEtB,AAAA;;;;;;;;AAAA,AAAA,AAAMI;AAAN,AAAA,AAAA,AAAA,AAAA;AAAA,AAAA,AAAAD;AAAA;AAAA,AAAAC;;;AAAA;AAAA,AAAAA,AAAA,AAAA,AAAA;;;;AAAA,AAAA,AAAAC,AAAA,AAAA,AAAA,AAAA;;;;;AAAA,AAAA,AAAA,AAAMD;AAAN,AAOM,AAAA,AAAA,AAACS,AAA8B,AAACC;;;AAPtC,AAAA,AAAA,AAAA,AAAMV;AAAN,AAAA,AAAA,AAAAE;AAAA,AAAA,AAAA,AAAA,AAAA,AAAAC,AAAA,AAAA,AAAA,AAAA,AAAA,AAAAA,AAAA,AAAA,AAAAC,AAAA,AAAAD,AAAA,AAAA,AAAA,AAAA,AAAAE,AAAAC,AAAAH,AAAAA;AAAA,AAAA,AAAAI,AAAAJ,AAAA;AAAA,AAAA,AAAA,AAAA,AAAA,AAAAK,AAAA,AAAA,AAAA,AAAA,AAAA,AAAAA,AAAA,AAAA,AAAAJ,AAAA,AAAAI,AAAA,AAAA,AAAA,AAAA,AAAAH,AAAAC,AAAAE,AAAAA;AAAA,AAAAD,AAAAC,AAAA,AAQa;AARb,AAAAD,AAAAC,AAAA,AAQkB;AARlB,AAAAD,AAAAC,AAAA,AAQ8B;AAR9B,AASG,AAAA,AAAA,AAAA,AAAA,AAACG,AAA2B,AAACjB,AAAekB,AACT,AAAA,AAAaC,AACZC;;;AAXvC,AAAA,AAAA,AAAMd;;AAAN","names":["ajax.ring/make-ring-read","ajax.protocols/-status","response","ajax.protocols/-get-all-headers","body-read","G__22950","ajax.ring/ring-response-format","js/Error","p__22953","map__22954","cljs.core/PROTOCOL_SENTINEL","cljs.core.apply.cljs$core$IFn$_invoke$arity$2","cljs.core/hash-map","cljs.core.get.cljs$core$IFn$_invoke$arity$2","map__22955","ajax.ring.ring_response_format.cljs$core$IFn$_invoke$arity$1","ajax.formats.raw_response_format.cljs$core$IFn$_invoke$arity$0","ajax.interceptors/map->ResponseFormat","read","description","content-type"]}