---
layout: default
published: true
---

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="../../font-awesome/css/font-awesome.min.css">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->

    <title>CitySDK - USA Map - Demographics Example</title>

    <link href="https://cdn.rawgit.com/manifestinteractive/jqvmap/stable/jqvmap/jqvmap.css" media="screen" rel="stylesheet" type="text/css" />

    <script src="https://cdn.rawgit.com/manifestinteractive/jqvmap/stable/jqvmap/jquery.vmap.js" type="text/javascript"></script>
    <script src="https://cdn.rawgit.com/manifestinteractive/jqvmap/stable/jqvmap/maps/jquery.vmap.usa.js" type="text/javascript"></script>
    <script src="https://cdn.rawgit.com/uscensusbureau/citysdk/Release0.6/js/citysdk.js"></script>
    <script src="https://cdn.rawgit.com/uscensusbureau/citysdk/Release0.6/js/citysdk.census.js"></script>

    <script type="text/javascript">
        var apiKey = prompt("Please enter your Census API key", "API Key");

        var sdk = new CitySDK();
        var census = sdk.modules.census;
        census.enable(apiKey);

        jQuery(document).ready(function() {
            jQuery('#vmap').css("width", window.innerWidth);
            jQuery('#vmap').css("height", window.innerHeight);

            jQuery('#vmap').vectorMap({
                map: 'usa_en',
                enableZoom: true,
                showTooltip: false,
                onRegionClick: function(element, code, region)
                {
                    var request = {"state": code.toUpperCase(),
                                   "level": "state",
                                    "variables": ["income", "poverty", "B16006_007E", "B01003_001E"]};

                    census.APIRequest(request, function(response) {
                        var message = 'You clicked "'
                                + region
                                + '" which has the code: '
                                + code.toUpperCase()
                                + "\n\n" + census.aliases.income.description + ": " + Number(response.data[0].income).toLocaleString('en')
                                + "\n\n" + census.aliases.poverty.description + ": " + response.data[0].poverty
                                + "\n\n" + "Spanish only speakers: " + Number(response.data[0].B16006_007E).toLocaleString('en')
                                + "\n\n" + "Population: " + Number(response.data[0].B01003_001E).toLocaleString('en')
                                + "\n\n" + "Percent only spanish speaking: " + ((response.data[0].B16006_007E / response.data[0].B01003_001E) * 100).toFixed(3) + "%";

                        alert(message);
                    });
                }
            });
        });
    </script>
</head>
<body>
<div class="jumbotron">
    <div class="container">
        <i class="fa fa-book fa-5x" style="padding-top: 3rem;"> CitySDK Pop and Income Map</i>
    </div>
</div>
<div class="container">
<div id="vmap"></div>
    </div>
</body>
</html>
