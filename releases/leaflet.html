<html>
<head>
	<title>Leaflet GeoJSON Example</title>
	<meta charset="utf-8" />

	<meta name="viewport" content="width=device-width, initial-scale=1.0">

	 <link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet-0.7.3/leaflet.css" />
</head>
<body>
	<div id="map" style="width: 600px; height: 400px"></div>

	
	<script src="http://cdn.leafletjs.com/leaflet-0.7.3/leaflet.js"></script>
        <script src="js/vendor/jquery/jquery-2.1.3.min.js"></script>
        <script type="text/javascript" src="js/citysdk.js"></script>
	<script>
		window.onload = function(){
                    var map = L.map('map',{
                        center : [38.9047, -77.0164],
                        zoom: 10
                    });
                    L.tileLayer('http://{s}.tile.osm.org/{z}/{x}/{y}.png', {}).addTo(map);
                    var test = new CitySDK("561797fd0f7a799eb221cc57ae0fb5c798fcbb73");
                    var dataRequest = {
                                    "lat": 38.9047, 
                                "lng": -77.0164,            
                                "level": "tract",            
                                "variables": ["income"
                                              //"poverty", 
                                              //"age"
                                              ]};
                    var mapRequest = {
                                    "name":"Washington, D.C.",
                            "level": "tract",            
                            "variables": ["income",
                                          "poverty", 
                                          "population"
                                          ]};
                                      
                     test.GEORequest(mapRequest,function(data){
                     L.geoJson(data).addTo(map);
            });
            function onEachFeature(feature, layer) {
                layer.on({
                    mouseover: highlightFeature,
                    mouseout: resetHighlight,
                    click: zoomToFeature
    });
}


		function highlightFeature(e) {
                    console.log(e);
			var layer = e.target;

			layer.setStyle({
				weight: 5,
				color: '#666',
				dashArray: '',
				fillOpacity: 0.7
			});

			if (!L.Browser.ie && !L.Browser.opera) {
				layer.bringToFront();
			}

			info.update(layer.feature.properties);
		}
                        };        
	</script>
</body>
</html>
