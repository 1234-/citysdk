

<!DOCTYPE html>
<html>
  <head>
    <title>CitySDK Demo</title>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no">
    <meta charset="utf-8">
    <style>
      html, body, #map-canvas {
        height: 100%;

        margin: 0px;
        padding: 0px
      }
    </style>
    <script src="https://maps.googleapis.com/maps/api/js?v=3.exp&signed_in=true"></script>
    <script src="js/vendor/jquery/jquery-2.1.3.min.js"></script>
    <script type="text/javascript" src="js/citysdk.js"></script>
    <script>
        google.maps.event.addDomListener(window, 'load', initialize);
    	var map;
        var test = new CitySDK("561797fd0f7a799eb221cc57ae0fb5c798fcbb73");
       // var dataRequest = {
       // 		"lat": 38.9047, 
	//            "lng": -77.0164,            
	//            "level": "tract",            
	//            "variables": ["income"
	                          //"poverty", 
	                          //"age"
	 //                         ]};
        var mapRequest = {
        		"name":"Washington, D.C.",
                        "level": "tract",            
                        "variables": ["income",
                                     "poverty", 
                                      "population"
                                   ]};
       // test.APIRequest(dataRequest,function(data){
       // map.data.loadGeoJson("geojson/dc.json");
       // console.log(data);
       // });
        test.GEORequest(mapRequest,function(data){
            map.data.addGeoJson(data);
            });

function initialize() {
  map = new google.maps.Map(document.getElementById('map-canvas'), {
    zoom: 12,
    center: {lat: 38.9047, lng: -77.0164}
  });
  google.maps.event.addListener(map,'click', function(event){
      //var latitude = event.latLng.k;
      //var longitude = event.latLng.D;
      //var test = new CitySDK("561797fd0f7a799eb221cc57ae0fb5c798fcbb73");
      //  var request = {"lat": latitude, 
      //      "lng": longitude,
       //     "level": "tract", 
      //      "variables": ["income", "poverty", "age"]};
      //  test.APIRequest(request,function(data){
       // console.log(test);
        //state = data.state;
        //map.data.loadGeoJson('js/json/' + state + '_tract.json');
    //    });
      
  });
  // Load GeoJSON.
  

  // [START snippet]
  // Color each letter gray. Change the color when the isColorful property
  // is set to true.
  

  // When the user clicks, set 'isColorful', changing the color of the letters.
  map.data.addListener('click', function(event) {
    //event.feature.setProperty('isColorful', true);
    console.log(event.latLng);
  });

  // When the user hovers, Displays data in infowindow
  // Call revertStyle() to remove all overrides. This will use the style rules
  // defined in the function passed to setStyle()
  map.data.addListener('mouseover', function(event) {
      //latitude = event.latLng.k;
      //longitude = event.latLng.D;      
      var fips = event.feature.getProperty('STATEFP') + event.feature.getProperty('COUNTYFP') + event.feature.getProperty('TRACTCE');
      var place = event.feature.getProperty('NAME');
      var income = event.feature.getProperty('income');
      var population = event.feature.getProperty('population');
      var poverty = event.feature.getProperty('poverty');
      infowindow = new google.maps.InfoWindow({
        position:{lat:event.latLng.k,lng:event.latLng.D},
        content:"Name: " + place + "<br>Fips: " + fips + "<br> Population: " + population + "<br> Poverty: " + poverty + "<br>Income: " + income
    });
     infowindow.open(map);
  });

  map.data.addListener('mouseout', function(event) {
      infowindow.close();
  });
}

    </script>
  </head>
  <body>
    <div id="map-canvas"></div>    
  </body>
</html>

