---
layout: default
published: true
---

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="../font-awesome/css/font-awesome.min.css">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->

    <title>City SDK Guides: Using Multiple Modules</title>

    <script type="text/javascript"
            src="https://maps.googleapis.com/maps/api/js?v=3.exp&libraries=visualization&signed_in=true">
    </script>

    <script src="https://rawgit.com/uscensusbureau/citysdk/master/js/citysdk.js"></script>
    <script src="https://rawgit.com/uscensusbureau/citysdk/master/js/citysdk.census.js"></script>
    <script src="https://rawgit.com/uscensusbureau/citysdk/master/js/citysdk.farmersMarket.js"></script>

    <script>
        var apiKey, map;

        var sdk = new CitySDK();
        var census = sdk.modules.census;
        var farmersMarket = sdk.modules.farmersMarket;

        //We won't need API keys for just Geography.
        census.enable("");

        function clearMap() {
            map.data.forEach(function(feature) {
                map.data.remove(feature);
            });
        };

        function runExample(id) {
            clearMap();
            var textarea = $('#' + id);

            eval(textarea.val());
        };

        $(document).ready(
                function() {
                    var mapOptions = {
                        center: { lat: 37, lng: -120},
                        zoom: 8
                    };
                    map = new google.maps.Map(document.getElementById('map-canvas'),
                            mapOptions);

                    map.data.setStyle({
                        fillColor: 'blue'
                    });

                }
        );
    </script>

</head>

<body>

<!-- Main jumbotron for a primary marketing message or call to action -->
<div class="jumbotron">
    <div class="container">
        <i class="fa fa-book fa-5x" style="padding-top: 3rem;"> Using Multiple Modules Guide</i>
    </div>
</div>

<div class="container">
    <p>This page will guide you through creating an application that unifies data from multiple modules.</p>
    <p>This application will allow users to click on any county in California and view Farmer's Markets in and near that county.</p>
    <div class="row">
        <h3>Importing the Modules</h3>
        <p>The first step to using multiple modules is importing them. We'll add import statements to our &lt;head&gt; tag for the CitySDK core, and each module. We'll also
        import code for our Google Map.</p>
        <pre>
        &lt;head&gt;
            &lt;script type=&quot;text/javascript&quot;
                    src=&quot;https://maps.googleapis.com/maps/api/js?v=3.exp&amp;libraries=visualization&amp;signed_in=true&quot;&gt;
            &lt;/script&gt;

            &lt;script src=&quot;jquery.js&quot;&gt;&lt;/script&gt;
            &lt;script src=&quot;js/citysdk.js&quot;&gt;&lt;/script&gt;
            &lt;script src=&quot;js/citysdk.census.js&quot;&gt;&lt;/script&gt;
            &lt;script src=&quot;js/citysdk.farmersMarket.js&quot;&gt;&lt;/script&gt;
        &lt;/head&gt;
        </pre>
        <p>Everything is now imported and we can get started on our actual code.</p>
    </div>
    <div class="row">
        <h3>Instantiating the SDK, modules, and map</h3>
        <p>Our first step is instantiating the SDK, modules and map. To do this, we'll first need to add the required map-canvas div to the body of our file.</p>
        <pre>
            &lt;body&gt;
                &lt;div id=&quot;map-canvas&quot; style=&quot;width: 200px; height: 200px&quot;&gt;&lt;/div&gt;
            &lt;/body&gt;
        </pre>
        <p>This div is used by Google Maps to insert the map. That's all we'll need to do to the HTML of the page. The rest of this application is done in JavaScript.
        We'll be putting it in a &lt;script&gt; tag in our page's &lt;head&gt;, but you could also place it in a JavaScript file.</p>
        <p>First, let's create some global objects to hold our map and module references.</p>
        <pre>
            var apiKey, map;

            var sdk = new CitySDK();
            var census = sdk.modules.census;
            var farmersMarket = sdk.modules.farmersMarket;

            //We won't need API keys for just Geography.
            census.enable("");
        </pre>
        <p>Notice we're not asking for the API key here. The Census module only needs an API key if you are accessing ACS data; thus, since we're only getting geography, we can skip it.</p>
        <p>Next, we'll initialize the map inside of a <em>$(document).ready()</em> function.</p>
        <pre>
             $(document).ready(
                function() {
                    var mapOptions = {
                        center: { lat: 37, lng: -120},
                        zoom: 8
                    };
                    map = new google.maps.Map(document.getElementById('map-canvas'),
                            mapOptions);

                    map.data.setStyle({
                        fillColor: 'blue'
                    });

                }
             );
        </pre>
        <p>Great! Now our application should be displaying a map of California.</p>
    </div>
    <div class="row">
        <h3>Grabbing the County Geographies</h3>
        <p>Next up, we need to draw the boundaries for all of California's counties.</p>
    </div>
    <div class="row">
        <p>Let's check out the finished product:</p>
        <div id="map-canvas" style="width: 100%; height: 500px; position: relative; top: 1rem;"></div>
        <br/>
    </div>
</div>
</body>
