---
layout: default
published: true
---

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="../font-awesome/css/font-awesome.min.css">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->

    <title>City SDK Guides: Census Module</title>

</head>

<body>

<!-- Main jumbotron for a primary marketing message or call to action -->
<div class="jumbotron">
    <div class="container">
        <i class="fa fa-book fa-5x" style="padding-top: 3rem;"> Census Module Guide</i>
    </div>
</div>

<div class="container">
    <p>This page will guide you through using the Census module, from importing the scripts onto your page to requesting GeoJSON data from the Census. Go ahead and <a href="http://" target="_blank">grab a Census API key</a> before you get started.</p>
    <h3>Contents</h3>
    <ul>
        <li><a href="#importingTheModule">Importing the Module</a></li>
        <li><a href="#requestingVariables">Requesting Variables</a></li>
        <li><a href="#sublevelRequests">Sublevel Requests</a></li>
        <li><a href="#variableAliases">Variable Aliases</a></li>
        <li><a href="#theRequestObjectInDetail">The Request Object in Detail</a></li>
        <li><a href="#requestingGeojson">Requesting GeoJSON</a></li>
        <li><a href="#requestingGeojsonWithData">Requesting GeoJSON with Data</a></li>
    </ul>
    <div class="row" id="importingTheModule">
        <h3>Importing the Module</h3>
        <p>The first step in using the SDK is to import the Javascript files into your page. To use the Census module, you'll need to import jQuery, the
        core CitySDK (<em>citysdk.js</em>), and the Census module (<em>citysdk.census.js</em>) in your &lt;head&gt; tag, like so:</p>
        <pre>
            &lt;head&gt;
                &lt;title&gt;CitySDK - Example&lt;/title&gt;

                &lt;script src=&quot;libraries/vendor/jquery/jquery-2.1.3.min.js&quot; type=&quot;text/javascript&quot;&gt;&lt;/script&gt;
                &lt;script src=&quot;js/citysdk.js&quot; type=&quot;text/javascript&quot;&gt;&lt;/script&gt;
                &lt;script src=&quot;js/citysdk.census.js&quot; text=&quot;text/javascript&quot;&gt;&lt;/script&gt;

            &lt;/head&gt;
        </pre>
        <p>The next step is instantiate the SDK and <strong>enable</strong> the module. To do this, call the <em>enable()</em> function on the module, passing to it your API key as a string.</p>
        <pre>
            var sdk = new CitySDK();
            var censusModule = sdk.modules.census;

            censusModule.enable("CensusAPIKeyHere");
        </pre>
        <p>Once the module is enabled, you're all set to start using functionality. The following sections will show you how to make some common calls.</p>
    </div>

    <div class="row" id="requestingVariables">
        <h3>Requesting Variables</h3>
        <p>The Census module can access the Census's ACS 1-year, 3-year, and 5-year surveys. The default survey to access is the ACS 5-year. To request a variable, pass a
        JSON object containing the request and a callback function to the module's <em>APIRequest()</em> function. Below is an example that requests "income" and "population" for Washington D.C.</p>
        <pre>
            var request = {
                "lat": 38.9047,
                "lng": -77.0164,
                "level": "state",
                "variables": [
                    "income",
                    "population"
                ]
            };

            census.APIRequest(request, function(response) {
                console.log(response);
            });
        </pre>
        <p>Let's break down the request object piece by piece.</p>
        <ul>
            <li><strong>lat</strong> - <em>Number</em> - This tag specifies the latitude of the location in which we are interested. You can also specify this as "latitude" or "y".</li>
            <li><strong>lng</strong> - <em>Number</em> - This tag specifies the longitude of the location in which we are interested. You can also specify this as "longitude" or "x".</li>
            <li><strong>level</strong> - <em>String</em> - This tag specifies the "level" of data to request. Supported levels are based off of Census geographies, the SDK supporting: "blockGroup", "tract", "county", "state", "us", and "place".
            Please note, that the "place" level currently only supports incorporated places. If we changed our level to "blockGroup" instead of state, we would get information for a much smaller geographic region.</li>
            <li><strong>variables</strong> - <em>Array</em> - This is an optional array of strings which specify the variables from the ACS to request. This example uses an alias (see aliases below), but you could also request
            raw ACS variables like "B01003_001E". You can find a list of all ACS variables on the Census's developer site, or by calling the Census module's <em>getACSVariableDictionary()</em> function.</li>
        </ul>
        <p>We'll dive into the request object in detail later on. But first, let's look at what the response from this call looks like.</p>
        <p>The response to all requests in the Census module is a JSON object containing the request parameters and an extra property called <em>data</em>. The data property is an object with
        properties consisting of the requested variables. Here's the response to the request we made:</p>
        <pre>
            {
                  "year": "2013",
                  "lat": 38.9047,
                  "lng": -77.0164,
                  "level": "blockGroup",
                  "state": "11",
                  "county": "001",
                  "tract": "004701",
                  "blockGroup": "2",
                  "api": "acs5",
                  "place": "50000",
                  "place_name": "Washington city"
                  "data": {
                      "income": 79665,
                      "population": 619371
                  }
            }
        </pre>
        <p>You can see we got a lot of data back. Let's step through each property.</p>
        <ul>
            <li><strong>lat, lng, level</strong> - These properties are whatever you specified in your request.</li>
            <li><strong>year</strong> - This is the year of the ACS the module queried. ACS1, ACS3, and ACS5 support different years, so ensure you are requesting data for a year that is supported.</li>
            <li><strong>state, county, tract, blockGroup, place</strong> - These numbers are FIPS codes - how the Census
            categorizes its geographies. You won't typically need these, but they are provided in case you do.</li>
            <li><strong>api</strong> - This specifies the API the SDK used to acquire the data. You can specify this in your request. Check out the full-detail request object further on.</li>
            <li><strong>place_name</strong> - If your requested location lies within an incorporated place, the name of the place will be given to you.</li>
            <li><strong>data</strong> - This property is an object containing properties corresponding to the requested variables.</li>
        </ul>
    </div>

    <div class="row" id="sublevelRequests">
        <h3>Sublevel Requests</h3>
        <p>Finding data at a single location is all well and good - but what if you want the data for all counties in a state? Or all tracts in a county? This is where the sublevel tag comes into play.</p>
        <p>By specifying the tag "sublevel" as true, the SDK will request data for each entity in the level's container relationship. These relationships are:</p>
        <ul>
            <li>Sublevel on "us" returns data for all states in the U.S.</li>
            <li>Sublevel on "state" returns data for all counties in that state</li>
            <li>Sublevel on "county" returns data for all tracts in that county</li>
            <li>Sublevel on "tract" returns data for all block groups in that tract</li>
        </ul>
        <p>Let's look at an example request that will get all counties in Delaware.</p>
        <pre>
            var request = {
                            "state":"DE",
                            "level":"state",
                            "sublevel":"true",
                            "variables": [
                                "income",
                                "population"
                           ]};
        </pre>
        <p>You'll notice that instead of specifying <strong>lat, lng</strong> we've instead specified <strong>state</strong> with a
        two-letter USPS state code. This is shorthand for specifying the capital of a state's co-ordinates. Therefore, we're actually
        giving the request the co-ordinates for Dover, Delaware. This shorthand is useful when you're grabbing data at the state level.</p>
        <p>Here's what the response looks like:</p>
        <pre>
            {
                "level" : "state",
                "sublevel" : true,
                "variables" : ["income", "population"],
                "year" : 2013,
                "api" : "acs5",
                "lat" : 39.1619,
                "lng" : -75.5267,
                "state" : "10",
                "county" : "001",
                "tract" : "040900",
                "blockGroup" : "1",
                "place" : "21200",
                "place_name" : "Dover city",
                "data" : [{
                        "name" : "Kent County, Delaware",
                        "state" : "10",
                        "county" : "001",
                        "income" : "64414",
                        "population" : "165030"
                    }, {
                        "name" : "New Castle County, Delaware",
                        "state" : "10",
                        "county" : "003",
                        "income" : "79954",
                        "population" : "542784"
                    }, {
                        "name" : "Sussex County, Delaware",
                        "state" : "10",
                        "county" : "005",
                        "income" : "61308",
                        "population" : "200632"
                    }
                ]
            }

        </pre>
        <p>It looks a lot like our other response, except in this case <em>data</em> is an array of objects rather than a simple object.
        Anytime the sublevel tag is set to true, the data property will become an array of objects. Each of these objects contain the name of the
        entity, any relevant FIPS codes, and the data you requested.</p>
    </div>

    <div class="row" id="variableAliases">
        <h3>Variable Aliases</h3>
        <p>The SDK can acquire <em>any</em> variable from supported Census APIs if you specify the appropriate variable string. A list of all available variables is available at <a href="http://api.census.gov">http://api.census.gov</a>.</p>
        <p>The ACS has some complicated and confusing variable codes. To help alleviate this issue, the Census module supports some aliased variables.</p>
        <p>Aliased variable are specified by a string and return the most appropriate variable.
           Some variables are marked as "normalizable" which will generate a *VARIABLE_NAME*_normalized variable in the return along with the regular variable.</variable_name></p>
        <p>Available Aliases:</p>
        <ul>
            <li>income</li><li>income_per_capita</li><li>poverty</li><li>poverty_married</li><li>poverty_married_with_children</li><li>poverty_single_father</li><li>poverty_single_mother</li><li>age</li><li>median_male_age</li><li>median_female_age</li><li>population</li><li>commute_time</li><li>commute_time_solo_automobile</li><li>commute_time_carpool</li><li>commute_time_public_transport</li><li>commute_time_walked</li><li>commute_time_other</li>
        </ul>
        <p>To find out more about each alias, check out the associated object in the <em>census.aliases</em> object.</p>
    </div>

    <div class="row" id="theRequestObjectInDetail">
        <h3>The Request Object in Detail</h3>
        <p>Up until now we've shown you bits and pieces of the request object. Let's take a look at all of the available options.</p>
    </div>

    <div class="row" id="requestingGeojson">
        <h3>Requesting GeoJSON</h3>
    </div>

    <div class="row" id="requestingGeojsonWithData">
        <h3>Requesting GeoJSON with Data</h3>
    </div>
</div>
</body>
